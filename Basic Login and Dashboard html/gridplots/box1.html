<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated Line Chart with D3.js</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        .line {
            fill: none;
            stroke: steelblue;
            stroke-width: 2;
        }
        .axis path,
        .axis line {
            fill: none;
            shape-rendering: crispEdges;
        }
        .axis text {
            font-size: 12px;
        }
    </style>
</head>
<body>
    <svg width="600" height="400"></svg>
    <script>
        const svg = d3.select("svg"),
              width = +svg.attr("width"),
              height = +svg.attr("height");

        // Function to generate random data
        function generateData() {
            return Array.from({length: 10}, (_, i) => ({
                x: i,
                y: Math.floor(Math.random() * 100)
            }));
        }

        // Set up scales
        const x = d3.scaleLinear()
                    .domain([0, 9])  // Data range (0 to 9)
                    .range([0, width]);

        const y = d3.scaleLinear()
                    .domain([0, 100])  // Data range (0 to 100)
                    .range([height, 0]);

        // Line generator function
        const line = d3.line()
                       .x(d => x(d.x))
                       .y(d => y(d.y));

        // Create axes
        const xAxis = d3.axisBottom(x);
        const yAxis = d3.axisLeft(y);

        // Append axes to the SVG
        svg.append("g")
           .attr("class", "x axis")
           .attr("transform", "translate(0," + height + ")")
           .call(xAxis);

        svg.append("g")
           .attr("class", "y axis")
           .call(yAxis);

        // Function to update the line chart
        function updateChart(data) {
            // Bind data to the line
            const path = svg.selectAll(".line")
                            .data([data]);

            // Enter: Create a new line
            path.enter().append("path")
                .attr("class", "line")
                .attr("d", line)  // Set initial line path
                .attr("stroke-dasharray", function() {
                    return this.getTotalLength();
                })
                .attr("stroke-dashoffset", function() {
                    return this.getTotalLength();
                })
                .transition()  // Animate the line
                .duration(1000)
                .ease(d3.easeLinear)
                .attr("stroke-dashoffset", 0);  // Reveal the line

            // Update: Update existing line (if needed)
            path.transition()
                .duration(1000)
                .ease(d3.easeLinear)
                .attr("d", line);
        }

        // Initial chart update
        updateChart(generateData());

        // Function to periodically update the chart with new random data
        setInterval(() => {
            updateChart(generateData());
        }, 2000);  // Update every 2 seconds
    </script>
</body>
</html>
